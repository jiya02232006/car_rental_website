# Car Rental System API Documentation\n\nThis document provides comprehensive information about the Car Rental System REST API.\n\n## Base URL\n\n```\nDevelopment: http://localhost:5000/api\nProduction: https://yourdomain.com/api\n```\n\n## Authentication\n\nThe API uses JWT (JSON Web Token) for authentication. Include the token in the Authorization header:\n\n```\nAuthorization: Bearer <your_jwt_token>\n```\n\n## Response Format\n\nAll API responses follow this standard format:\n\n```json\n{\n  \"success\": true,\n  \"message\": \"Operation completed successfully\",\n  \"data\": {\n    // Response data here\n  }\n}\n```\n\nError responses:\n\n```json\n{\n  \"success\": false,\n  \"message\": \"Error description\",\n  \"errors\": {\n    // Detailed error information (optional)\n  }\n}\n```\n\n## Status Codes\n\n- `200` - OK: Request successful\n- `201` - Created: Resource created successfully\n- `400` - Bad Request: Invalid request data\n- `401` - Unauthorized: Authentication required\n- `403` - Forbidden: Insufficient permissions\n- `404` - Not Found: Resource not found\n- `409` - Conflict: Resource already exists\n- `422` - Unprocessable Entity: Validation failed\n- `500` - Internal Server Error: Server error\n\n## Endpoints\n\n### Authentication\n\n#### POST /auth/register\nRegister a new user account.\n\n**Request Body:**\n```json\n{\n  \"email\": \"user@example.com\",\n  \"password\": \"password123\",\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\",\n  \"phone\": \"1234567890\"\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"User registered successfully\",\n  \"data\": {\n    \"user\": {\n      \"id\": 1,\n      \"email\": \"user@example.com\",\n      \"firstName\": \"John\",\n      \"lastName\": \"Doe\",\n      \"phone\": \"1234567890\",\n      \"role\": \"customer\"\n    },\n    \"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\"\n  }\n}\n```\n\n#### POST /auth/login\nAuthenticate user and get access token.\n\n**Request Body:**\n```json\n{\n  \"email\": \"user@example.com\",\n  \"password\": \"password123\"\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Login successful\",\n  \"data\": {\n    \"user\": {\n      \"id\": 1,\n      \"email\": \"user@example.com\",\n      \"firstName\": \"John\",\n      \"lastName\": \"Doe\",\n      \"phone\": \"1234567890\",\n      \"role\": \"customer\"\n    },\n    \"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\"\n  }\n}\n```\n\n#### GET /auth/me\nGet current user profile (requires authentication).\n\n**Headers:**\n```\nAuthorization: Bearer <token>\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Profile retrieved successfully\",\n  \"data\": {\n    \"user\": {\n      \"id\": 1,\n      \"email\": \"user@example.com\",\n      \"firstName\": \"John\",\n      \"lastName\": \"Doe\",\n      \"phone\": \"1234567890\",\n      \"role\": \"customer\",\n      \"createdAt\": \"2024-01-01T10:00:00Z\"\n    }\n  }\n}\n```\n\n#### PATCH /auth/change-password\nChange user password (requires authentication).\n\n**Request Body:**\n```json\n{\n  \"currentPassword\": \"oldpassword\",\n  \"newPassword\": \"newpassword123\"\n}\n```\n\n### Cars\n\n#### GET /cars\nGet list of cars with optional filtering and pagination.\n\n**Query Parameters:**\n- `page` (number): Page number (default: 1)\n- `limit` (number): Items per page (default: 10, max: 100)\n- `brand` (string): Filter by car brand\n- `transmission` (string): Filter by transmission type (manual, automatic, cvt)\n- `fuelType` (string): Filter by fuel type (petrol, diesel, electric, hybrid)\n- `minPrice` (number): Minimum price per day\n- `maxPrice` (number): Maximum price per day\n- `seats` (number): Number of seats\n- `search` (string): Search in brand, model, or description\n- `status` (string): Filter by status (default: active)\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Cars retrieved successfully\",\n  \"data\": {\n    \"cars\": [\n      {\n        \"id\": 1,\n        \"brand\": \"Toyota\",\n        \"model\": \"Camry\",\n        \"year\": 2022,\n        \"transmission\": \"automatic\",\n        \"fuelType\": \"petrol\",\n        \"seats\": 5,\n        \"pricePerDay\": 50.00,\n        \"description\": \"Reliable and comfortable sedan\",\n        \"features\": [\"air_conditioning\", \"gps\", \"bluetooth\"],\n        \"imageUrl\": \"/uploads/car1.jpg\",\n        \"licensePlate\": \"ABC123\",\n        \"status\": \"active\",\n        \"averageRating\": \"4.5\",\n        \"reviewCount\": 10,\n        \"createdAt\": \"2024-01-01T10:00:00Z\"\n      }\n    ],\n    \"pagination\": {\n      \"page\": 1,\n      \"limit\": 10,\n      \"total\": 25,\n      \"totalPages\": 3,\n      \"hasMore\": true\n    }\n  }\n}\n```\n\n#### GET /cars/:id\nGet details of a specific car.\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Car retrieved successfully\",\n  \"data\": {\n    \"car\": {\n      \"id\": 1,\n      \"brand\": \"Toyota\",\n      \"model\": \"Camry\",\n      \"year\": 2022,\n      \"transmission\": \"automatic\",\n      \"fuelType\": \"petrol\",\n      \"seats\": 5,\n      \"pricePerDay\": 50.00,\n      \"description\": \"Reliable and comfortable sedan\",\n      \"features\": [\"air_conditioning\", \"gps\", \"bluetooth\"],\n      \"imageUrl\": \"/uploads/car1.jpg\",\n      \"licensePlate\": \"ABC123\",\n      \"status\": \"active\",\n      \"averageRating\": \"4.5\",\n      \"reviewCount\": 10\n    },\n    \"reviews\": [\n      {\n        \"rating\": 5,\n        \"comment\": \"Great car, very comfortable!\",\n        \"createdAt\": \"2024-01-01T10:00:00Z\",\n        \"firstName\": \"Jane\",\n        \"lastName\": \"Smith\"\n      }\n    ]\n  }\n}\n```\n\n#### POST /cars\nCreate a new car (Admin only).\n\n**Request Body:**\n```json\n{\n  \"brand\": \"Toyota\",\n  \"model\": \"Camry\",\n  \"year\": 2022,\n  \"transmission\": \"automatic\",\n  \"fuelType\": \"petrol\",\n  \"seats\": 5,\n  \"pricePerDay\": 50.00,\n  \"description\": \"Reliable and comfortable sedan\",\n  \"features\": [\"air_conditioning\", \"gps\", \"bluetooth\"],\n  \"licensePlate\": \"ABC123\"\n}\n```\n\n#### PUT /cars/:id\nUpdate an existing car (Admin only).\n\n#### DELETE /cars/:id\nDelete a car (Admin only).\n\n#### POST /cars/:id/check-availability\nCheck if a car is available for specific dates.\n\n**Request Body:**\n```json\n{\n  \"startDate\": \"2024-02-01\",\n  \"endDate\": \"2024-02-05\"\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Availability checked successfully\",\n  \"data\": {\n    \"available\": true,\n    \"carId\": 1,\n    \"startDate\": \"2024-02-01\",\n    \"endDate\": \"2024-02-05\"\n  }\n}\n```\n\n### Bookings\n\n#### GET /bookings\nGet user's bookings (requires authentication).\n\n**Query Parameters:**\n- `page` (number): Page number\n- `limit` (number): Items per page\n- `status` (string): Filter by status\n\n#### POST /bookings\nCreate a new booking (requires authentication).\n\n**Request Body:**\n```json\n{\n  \"carId\": 1,\n  \"startDate\": \"2024-02-01\",\n  \"endDate\": \"2024-02-05\",\n  \"notes\": \"Pick up at airport\"\n}\n```\n\n#### GET /bookings/:id\nGet specific booking details.\n\n#### PUT /bookings/:id\nUpdate a booking.\n\n#### DELETE /bookings/:id\nCancel a booking.\n\n### File Upload\n\n#### POST /upload\nUpload a file (car images, etc.).\n\n**Request:**\n- Content-Type: multipart/form-data\n- Field name: 'file'\n- Supported formats: JPEG, PNG, WebP\n- Max size: 5MB\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"File uploaded successfully\",\n  \"data\": {\n    \"url\": \"/uploads/1640995200000-abc123.jpg\",\n    \"filename\": \"1640995200000-abc123.jpg\",\n    \"size\": 1024000\n  }\n}\n```\n\n## Rate Limiting\n\nAPI requests are rate-limited to prevent abuse:\n\n- **General endpoints**: 100 requests per 15 minutes\n- **Authentication endpoints**: 5 requests per 15 minutes\n- **File upload**: 10 requests per hour\n\nRate limit headers are included in responses:\n\n```\nX-RateLimit-Limit: 100\nX-RateLimit-Remaining: 95\nX-RateLimit-Reset: 1640995200\n```\n\n## Error Handling\n\n### Validation Errors\n\n```json\n{\n  \"success\": false,\n  \"message\": \"Validation failed\",\n  \"errors\": {\n    \"email\": \"Please provide a valid email address\",\n    \"password\": \"Password must be at least 6 characters long\"\n  }\n}\n```\n\n### Authentication Errors\n\n```json\n{\n  \"success\": false,\n  \"message\": \"Authentication required\"\n}\n```\n\n### Authorization Errors\n\n```json\n{\n  \"success\": false,\n  \"message\": \"Insufficient permissions\"\n}\n```\n\n### Not Found Errors\n\n```json\n{\n  \"success\": false,\n  \"message\": \"Car not found\"\n}\n```\n\n## SDKs and Examples\n\nFor code examples and SDK implementations, see:\n- [JavaScript/Node.js Examples](./examples/javascript.md)\n- [Python Examples](./examples/python.md)\n- [curl Examples](./examples/curl.md)\n\n## Changelog\n\nSee [CHANGELOG.md](./CHANGELOG.md) for API version history and breaking changes.