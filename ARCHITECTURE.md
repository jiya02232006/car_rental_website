# Car Rental System Architecture\n\nThis document describes the overall architecture and project structure of the Car Rental System.\n\n## System Overview\n\nThe Car Rental System is a full-stack web application built with a modern tech stack:\n\n- **Frontend**: React 18 with Vite, Tailwind CSS, React Router\n- **Backend**: Node.js with Express.js, JWT authentication\n- **Database**: MySQL 8.0+ with stored procedures and triggers\n- **Deployment**: Docker containers with Docker Compose\n\n## Architecture Diagram\n\n```\n┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐\n│   Frontend      │    │   Backend API   │    │   Database      │\n│   (React)       │    │   (Node.js)     │    │   (MySQL)       │\n│                 │    │                 │    │                 │\n│ • Components    │◄──►│ • Controllers   │◄──►│ • Tables        │\n│ • Pages         │    │ • Services      │    │ • Views         │\n│ • Hooks         │    │ • Middleware    │    │ • Procedures    │\n│ • Contexts      │    │ • Routes        │    │ • Triggers      │\n│ • Services      │    │ • Validators    │    │                 │\n└─────────────────┘    └─────────────────┘    └─────────────────┘\n        │                       │                       │\n        │                       │                       │\n        ▼                       ▼                       ▼\n┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐\n│   Static Files  │    │   File Storage  │    │   Backups       │\n│   (Images, CSS) │    │   (Uploads)     │    │   (Scripts)     │\n└─────────────────┘    └─────────────────┘    └─────────────────┘\n```\n\n## Project Structure\n\n```\ncar-rental-system/\n├── 📁 backend/                 # Backend API server\n│   ├── 📁 config/              # Configuration files\n│   ├── 📁 controllers/         # Route controllers\n│   ├── 📁 middleware/          # Express middleware\n│   ├── 📁 models/              # Database models\n│   ├── 📁 routes/              # API route definitions\n│   ├── 📁 services/            # Business logic services\n│   ├── 📁 utils/               # Utility functions\n│   ├── 📁 validators/          # Input validation schemas\n│   ├── 📁 tests/               # Backend tests\n│   │   ├── 📁 unit/            # Unit tests\n│   │   └── 📁 integration/     # Integration tests\n│   ├── 📁 uploads/             # File upload directory\n│   ├── 📄 .env.example         # Environment variables example\n│   ├── 📄 Dockerfile           # Docker configuration\n│   ├── 📄 jest.config.js       # Test configuration\n│   ├── 📄 package.json         # Dependencies and scripts\n│   └── 📄 server.js            # Application entry point\n│\n├── 📁 frontend/                # React frontend application\n│   ├── 📁 public/              # Static public files\n│   ├── 📁 src/                 # Source code\n│   │   ├── 📁 assets/          # Static assets\n│   │   │   ├── 📁 images/      # Image files\n│   │   │   └── 📁 icons/       # Icon files\n│   │   ├── 📁 components/      # Reusable React components\n│   │   │   ├── 📁 ui/          # UI components (buttons, modals, etc.)\n│   │   │   ├── 📁 forms/       # Form components\n│   │   │   └── 📁 cars/        # Car-specific components\n│   │   ├── 📁 contexts/        # React contexts (global state)\n│   │   ├── 📁 hooks/           # Custom React hooks\n│   │   ├── 📁 layouts/         # Page layout components\n│   │   ├── 📁 pages/           # Page components\n│   │   ├── 📁 services/        # API service functions\n│   │   ├── 📁 utils/           # Utility functions\n│   │   ├── 📁 tests/           # Frontend tests\n│   │   │   ├── 📁 components/  # Component tests\n│   │   │   ├── 📁 hooks/       # Hook tests\n│   │   │   └── 📁 pages/       # Page tests\n│   │   ├── 📄 App.jsx          # Main App component\n│   │   ├── 📄 main.jsx         # Application entry point\n│   │   └── 📄 index.css        # Global styles\n│   ├── 📄 .env.example         # Environment variables example\n│   ├── 📄 Dockerfile           # Docker configuration\n│   ├── 📄 nginx.conf           # Nginx configuration\n│   ├── 📄 package.json         # Dependencies and scripts\n│   ├── 📄 tailwind.config.js   # Tailwind CSS configuration\n│   └── 📄 vite.config.js       # Vite build configuration\n│\n├── 📁 database/                # Database files\n│   ├── 📄 schema.sql           # Database schema\n│   └── 📄 sample_data.sql      # Sample data for development\n│\n├── 📁 docs/                    # Documentation\n│   ├── 📁 api/                 # API documentation\n│   ├── 📁 deployment/         # Deployment guides\n│   └── 📁 development/        # Development guides\n│\n├── 📁 scripts/                 # Utility scripts\n│   ├── 📄 dev.bat             # Windows development script\n│   ├── 📄 dev.sh              # Linux/macOS development script\n│   └── 📄 deploy.sh           # Production deployment script\n│\n├── 📄 .env.production.example  # Production environment example\n├── 📄 .gitignore              # Git ignore rules\n├── 📄 ARCHITECTURE.md         # This file\n├── 📄 docker-compose.yml      # Docker Compose configuration\n├── 📄 docker-compose.prod.yml # Production Docker Compose\n├── 📄 LICENSE                 # MIT License\n└── 📄 README.md              # Project documentation\n```\n\n## Backend Architecture\n\n### Layer Structure\n\nThe backend follows a layered architecture pattern:\n\n```\n┌─────────────────────────┐\n│     Presentation        │  ← Routes, Controllers\n├─────────────────────────┤\n│     Business Logic      │  ← Services, Validators\n├─────────────────────────┤\n│     Data Access         │  ← Models, Database\n└─────────────────────────┘\n```\n\n### Component Responsibilities\n\n#### Controllers (`/controllers`)\n- Handle HTTP requests and responses\n- Input validation and sanitization\n- Call appropriate services\n- Format API responses\n\n#### Services (`/services`)\n- Business logic implementation\n- Data processing and transformation\n- External API integrations\n- Complex operations\n\n#### Models (`/models`)\n- Database interaction layer\n- Query builders and data mapping\n- Database connection management\n\n#### Middleware (`/middleware`)\n- Authentication and authorization\n- Request logging and monitoring\n- Error handling\n- Rate limiting\n\n#### Validators (`/validators`)\n- Input validation using Joi\n- Data sanitization\n- Custom validation rules\n\n#### Utils (`/utils`)\n- Reusable utility functions\n- Helper functions\n- Common constants\n\n### API Design Patterns\n\n#### RESTful Architecture\n- Standard HTTP methods (GET, POST, PUT, DELETE)\n- Resource-based URLs\n- Consistent response format\n- Proper status codes\n\n#### Error Handling\n- Centralized error handling middleware\n- Consistent error response format\n- Detailed error logging\n- User-friendly error messages\n\n#### Authentication\n- JWT token-based authentication\n- Role-based access control\n- Secure password hashing with bcrypt\n- Token refresh mechanism\n\n## Frontend Architecture\n\n### Component Architecture\n\nThe frontend follows a component-based architecture:\n\n```\n┌─────────────────────────┐\n│        Pages            │  ← Route components\n├─────────────────────────┤\n│       Layouts           │  ← Page layouts\n├─────────────────────────┤\n│     Components          │  ← Reusable components\n├─────────────────────────┤\n│        UI Kit           │  ← Basic UI elements\n└─────────────────────────┘\n```\n\n### State Management\n\n#### Context API\n- Global state management\n- Authentication state\n- User preferences\n- Application settings\n\n#### Local State\n- Component-specific state\n- Form state management\n- UI interaction state\n\n### Data Fetching\n\n#### Custom Hooks\n- API call abstraction\n- Loading and error states\n- Data caching and synchronization\n- Reusable data operations\n\n#### Service Layer\n- HTTP client configuration\n- API endpoint definitions\n- Request/response interceptors\n- Error handling\n\n## Database Design\n\n### Entity Relationship Diagram\n\n```\n┌─────────────┐    ┌─────────────┐    ┌─────────────┐\n│    Users    │    │  Bookings   │    │    Cars     │\n│             │    │             │    │             │\n│ • id (PK)   │◄──►│ • id (PK)   │◄──►│ • id (PK)   │\n│ • email     │    │ • user_id   │    │ • brand     │\n│ • password  │    │ • car_id    │    │ • model     │\n│ • role      │    │ • start_date│    │ • year      │\n│ • ...       │    │ • end_date  │    │ • price     │\n└─────────────┘    │ • status    │    │ • ...       │\n                   │ • ...       │    └─────────────┘\n                   └─────────────┘\n                          │\n                          ▼\n                   ┌─────────────┐    ┌─────────────┐\n                   │  Payments   │    │   Reviews   │\n                   │             │    │             │\n                   │ • id (PK)   │    │ • id (PK)   │\n                   │ • booking_id│    │ • booking_id│\n                   │ • amount    │    │ • rating    │\n                   │ • status    │    │ • comment   │\n                   │ • ...       │    │ • ...       │\n                   └─────────────┘    └─────────────┘\n```\n\n### Database Features\n\n#### Stored Procedures\n- Complex business logic\n- Data validation\n- Atomic operations\n- Performance optimization\n\n#### Triggers\n- Automatic data updates\n- Audit logging\n- Data consistency\n- Business rule enforcement\n\n#### Views\n- Complex query simplification\n- Data aggregation\n- Security and access control\n- Performance optimization\n\n## Security Architecture\n\n### Authentication & Authorization\n\n```\n┌──────────────┐    ┌──────────────┐    ┌──────────────┐\n│   Frontend   │    │   Backend    │    │   Database   │\n│              │    │              │    │              │\n│ 1. Login     │───►│ 2. Validate  │───►│ 3. User Data │\n│    Request   │    │    Credentials│    │    Lookup    │\n│              │◄───│ 4. JWT Token │◄───│              │\n│ 5. Store     │    │    Generation│    │              │\n│    Token     │    │              │    │              │\n│              │    │              │    │              │\n│ 6. API       │───►│ 7. Token     │    │              │\n│    Requests  │    │    Validation│    │              │\n│    + Token   │    │              │    │              │\n└──────────────┘    └──────────────┘    └──────────────┘\n```\n\n### Data Protection\n\n#### Input Validation\n- Client-side validation\n- Server-side validation\n- SQL injection prevention\n- XSS protection\n\n#### Encryption\n- Password hashing (bcrypt)\n- JWT token signing\n- HTTPS in production\n- Secure cookie handling\n\n## Performance Considerations\n\n### Backend Optimizations\n- Database indexing\n- Query optimization\n- Caching strategies\n- Connection pooling\n- Rate limiting\n\n### Frontend Optimizations\n- Code splitting\n- Lazy loading\n- Image optimization\n- Bundle optimization\n- CDN integration\n\n### Database Optimizations\n- Index optimization\n- Query optimization\n- Connection pooling\n- Read replicas\n- Caching layer\n\n## Deployment Architecture\n\n### Development Environment\n```\n┌─────────────┐    ┌─────────────┐    ┌─────────────┐\n│  React Dev  │    │ Node.js Dev │    │ MySQL Local │\n│ Server      │    │ Server      │    │ Instance    │\n│ (Vite)      │    │ (nodemon)   │    │             │\n│ Port: 3000  │    │ Port: 5000  │    │ Port: 3306  │\n└─────────────┘    └─────────────┘    └─────────────┘\n```\n\n### Production Environment\n```\n┌─────────────────────────────────────────────────────┐\n│                Load Balancer                        │\n└─────────────────────┬───────────────────────────────┘\n                      │\n┌─────────────────────┼───────────────────────────────┐\n│              Docker Compose                         │\n│                     │                               │\n│ ┌─────────────┐   ┌─┴─────────────┐   ┌───────────┐ │\n│ │   Nginx     │   │   Node.js     │   │   MySQL   │ │\n│ │  (Frontend) │   │   (Backend)   │   │(Database) │ │\n│ │             │   │               │   │           │ │\n│ └─────────────┘   └───────────────┘   └───────────┘ │\n└─────────────────────────────────────────────────────┘\n```\n\n## Testing Strategy\n\n### Backend Testing\n- **Unit Tests**: Individual functions and modules\n- **Integration Tests**: API endpoints and database\n- **End-to-End Tests**: Complete user workflows\n\n### Frontend Testing\n- **Component Tests**: Individual React components\n- **Hook Tests**: Custom React hooks\n- **Integration Tests**: Component interactions\n- **E2E Tests**: User journey testing\n\n### Test Coverage Goals\n- **Backend**: 80% code coverage\n- **Frontend**: 80% component coverage\n- **Critical Paths**: 100% coverage\n\n## Monitoring & Logging\n\n### Application Monitoring\n- Error tracking and reporting\n- Performance monitoring\n- User analytics\n- System health checks\n\n### Logging Strategy\n- Structured logging (JSON format)\n- Log levels (error, warn, info, debug)\n- Request/response logging\n- Security event logging\n\n## Scalability Considerations\n\n### Horizontal Scaling\n- Load balancer configuration\n- Multiple backend instances\n- Database read replicas\n- CDN for static assets\n\n### Vertical Scaling\n- Resource optimization\n- Performance profiling\n- Memory management\n- CPU utilization\n\n### Future Enhancements\n- Microservices architecture\n- Event-driven architecture\n- Caching layer (Redis)\n- Message queues\n- Container orchestration (Kubernetes)\n\nThis architecture provides a solid foundation for a scalable, maintainable, and secure car rental system while following modern web development best practices."